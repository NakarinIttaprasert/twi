<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.globe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt&display=swap" rel="stylesheet">
    <title>Teacher Registration</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;

            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .form-control {
            border-radius: 3rem;
            border: none;
            outline: none;
            box-shadow: none;
            text-align-last: center;
            text-align: center;
            font-size: 1.2rem;
        }

        input.form-control:focus {
            outline: 0;
            box-shadow: 0 0 0 3px rgba(255, 202, 44, .5);
            font-size: 1.3rem;
        }

        label {
            font-size: 1.2rem;
            color: #fff;
        }

        .submit-btn {
            border-radius: 3rem;
            border: none;
            outline: none;
            box-shadow: none;
            font-weight: bold;
            font-size: 1.2rem;
            padding: 0.5rem;
            cursor: pointer;
            width: 200px;
        }

        .submit-btn:hover {
            font-size: 1.4rem;
        }

        #annouce {
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <section class="text-center mt-2">
            <img alt="icon" src="https://img.icons8.com/ios/48/ffffff/men-age-group-4.png" />
            <p class="display-4 text-center text-light fw-bold">Teacher Registration</p>
        </section>
        <section>
            <div class="container-fluid main-container">

                <form id="regist-form">
                    <p id="annouce" class="text-light p-4 h5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Welcome to TWI teacher jobs alert registration. Pls fill up your fullname same as we sent you in the email and fill up LINE ID and phone number. If you do not
                        have
                        WhatsApp WeChat or Facebook, pls fill "-" in the answer</p>
                    <div class="row justify-content-center">
                        <div class="col-md-4  text-center mt-3">
                            <label for="email"><span><img alt="icon" src="https://img.icons8.com/fluency-systems-regular/20/ffffff/user.png" /></span> Email *</label>
                            <input type="email" id="email" name="email" class="form-control">
                        </div>
                        <div class="col-md-4  text-center mt-3">
                            <label for="password"><span></span> Password(Birthdate)&nbsp;&nbsp;<span class="badge rounded-pill bg-warning text-dark"> example 01011990</span></label>
                            <input type="password" id="password" name="password" class="form-control">
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div class="col-md-4  text-center mt-3">
                            <label for="lineid"><span></span> Line ID</label>
                            <input type="text" id="lineid" name="lineid" class="form-control">
                        </div>
                        <div class="col-md-4  text-center mt-3">
                            <label for="whatsapp"><span><img src="https://img.icons8.com/windows/20/ffffff/whatsapp--v1.png" /></span> WhatsApp</label>
                            <input type="text" id="whatsapp" name="whatsapp" class="form-control">
                        </div>
                        <div class="col-md-4  text-center mt-3">
                            <label for="wechat"><span><img src="https://img.icons8.com/ios/20/ffffff/weixing.png" /></span> WeChat ID</label>
                            <input type="text" id="wechat" name="wechat" class="form-control">
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div class="col-md-4  text-center mt-3">
                            <label for="facebook"><span><img src="https://img.icons8.com/windows/20/ffffff/facebook-new.png" /></span> Facebook</label>
                            <input type="text" id="facebook" name="facebook" class="form-control">
                        </div>
                        <div class="col-md-4  text-center mt-3">
                            <label for="tel"><span><img alt="icon" src="https://img.icons8.com/material-outlined/20/ffffff/phone-not-being-used.png" /></span> Tel</label>
                            <input type="text" id="tel" name="tel" class="form-control">
                        </div>
                    </div>

                    <div class="row mt-4 mb-5">
                        <div class="col text-center">
                            <button type="submit" class="btn btn-warning submit-btn">Confirm</button>
                        </div>
                    </div>
                    <input type="text" id="accept" name="accept" hidden>
                </form>
            </div>
        </section>
    </div>
    <div class="modal fade" id="pdpaConsent" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-warning">
                    <h5 class="modal-title">Thailand-Personal-Data-Protection-Act (PDPA)</h5>
                </div>
                <div class="modal-body">
                    <p>
                        &nbsp;&nbsp;&nbsp;TWI provides teaching jobs news alert to you. This
                        TWI's software application is for applicants, both
                        foreign workers and Thai workers to fill in their
                        personal information for purpose of finding teaching
                        jobs. At the same time TWI will collect, process and
                        keep your personal data on our Database and use
                        the information to do marketing, sharing with our
                        business partners (schools and agencies) for your
                        benefit and TWI's business interest including finding
                        and placing jobs for you.
                        <br><br>
                        &nbsp;&nbsp;&nbsp;<u>If you allow us to do as
                            above, pls click "Yes", and then proceed further. If
                            not, you may click "No" and stop this questionnaire</u>
                    </p>
                </div>
                <div class="modal-footer d-flex justify-content-between">
                    <button style="max-width:200px; min-width:150px" type="button" id="denied-btn" class=" btn btn-secondary">NO</button>
                    <button style="max-width:200px; min-width:150px" type="button" id="accept-btn" class=" btn btn-primary">YES</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        VANTA.GLOBE({
            el: "body",
            mouseControls: false,
            touchControls: false,
            gyroControls: false,
            // minHeight: 20.00,
            // minWidth: 20.00,
            scale: 1.0,
            scaleMobile: 1.0,
            size: 0.3,
            backgroundColor: 0x21252b,
            color2: 0xc6ccd7,

        })
    </script>
    <script>
        var scripturl = 'https://script.google.com/macros/s/AKfycbxHpF8I_PK0WabmuSnx1i7CcuPHtUruzaO2ecaC6SNxDzJeV-nf-XmgVnmbOBmYhpYo/exec'
        $(document).ready(function () {
            liff.init({ liffId: '1656895429-Krdqqkw8' })
            liff.ready.then(() => {
                if (!liff.isLoggedIn()) {
                    liff.login();
                }
            })

            $('#pdpaConsent').modal('show')
            $('#accept-btn').click(function () {
                $('#pdpaConsent').modal('hide')
                $('#accept').val('accept')
                console.log($('#accept').val())
            })
            $('#denied-btn').click(function () {
                $('#pdpaConsent').modal('hide')
                $('.container-fluid').remove()
                Swal.fire({
                    icon: 'success',
                    title: 'You have denied to provide your personal data to TWI',
                    allowOutsideClick: false,
                    showConfirmButton: false,
                })
            })
        })
        $('#regist-form').submit(async function () {
            event.preventDefault()
            if ($('#email').val().indexOf('@gmail.com') <= -1) {
                Swal.fire({
                    icon: 'error',
                    title: 'Please use your Gmail account',
                    allowOutsideClick: false,
                    confirmButtonText: "OK"
                })
                return
            }
            let formdata = $(this).serializeArray()
            let data = {}
            formdata.forEach(function (item) {
                data[item.name] = item.value
            })
            console.log("🚀 ~ data", data)
            let isAlert = false
            Object.keys(data).forEach(function (key) {
                if (data[key] == '' && !isAlert) {
                    isAlert = true
                    $(`#${key}`).focus()
                    Swal.fire({
                        icon: 'error',
                        title: 'Please complete the information.',
                        text: 'Please enter "-" for any blank information',
                        showConfirmButton: false,
                        timer: 3000,
                        timerProgressBar: true,
                    })
                    return false
                }
            })
            if (!isAlert) {
                $.LoadingOverlay("show", {
                    // background: "rgba(177, 48, 104, 0.5)"
                });
                let profile = await liff.getProfile()
                data.uid = profile.userId
                data.displayname = profile.displayName
                data.pictureurl = profile.pictureUrl
                $.ajax({
                    url: scripturl + '?opt=teacherregist',
                    type: 'POST',
                    data: data,
                    success: function (res) {
                        $.LoadingOverlay("hide");
                        if (res == 'duplicate') {
                            Swal.fire({
                                icon: 'error',
                                title: 'Error',
                                text: 'This Line Account is already registered.',
                                confirmButtonText: 'OK',
                            }).then((result) => {
                                if (liff.isInClient()) {
                                    liff.closeWindow();
                                } else {
                                    window.location.href = 'https://lin.ee/RMVcU7O'
                                }
                            })
                        } else if (res == 'notfound') {
                            Swal.fire({
                                icon: 'error',
                                title: 'Error',
                                html: 'Sorry your email is not in our Database. Pls check your email whether it is the same email as we sent you by email.<br>If you are not yet registered with google form, please register with this link <a href="https://docs.google.com/forms/d/e/1FAIpQLSezX8ug0N2489kMFQsN6I2d-3E4wXhONecLhDRi_IVoPo8ACw/viewform" target="_blank">Registration with google form</a> and then try again.',
                                confirmButtonText: 'OK',
                            }).then((result) => {
                                if (liff.isInClient()) {
                                    liff.closeWindow();
                                } else {
                                    window.location.href = 'https://docs.google.com/forms/d/e/1FAIpQLSezX8ug0N2489kMFQsN6I2d-3E4wXhONecLhDRi_IVoPo8ACw/viewform'
                                }
                            })
                        }
                        else {
                            Swal.fire({
                                icon: 'success',
                                title: 'Success',
                                html: 'You can now recieve notifications from us.',
                                confirmButtonText: 'OK',
                            }).then(function () {
                                if (liff.isInClient()) {
                                    let bubble = {
                                        "type": "bubble",
                                        "header": {
                                            "type": "box",
                                            "layout": "horizontal",
                                            "contents": [
                                                {
                                                    "type": "box",
                                                    "layout": "vertical",
                                                    "contents": [
                                                        {
                                                            "type": "image",
                                                            "url": profile.pictureUrl,
                                                            "size": "full",
                                                            "aspectMode": "cover"
                                                        }
                                                    ],
                                                    "width": "50px",
                                                    "cornerRadius": "50px"
                                                },
                                                {
                                                    "type": "box",
                                                    "layout": "vertical",
                                                    "contents": [
                                                        {
                                                            "type": "text",
                                                            "text": "Welcome " + profile.displayName,
                                                            "weight": "bold",
                                                            'color': '#ffffff'
                                                        }
                                                    ],
                                                    "alignItems": "center",
                                                    "justifyContent": "center"
                                                }
                                            ],
                                            "margin": "lg",
                                            "paddingAll": "md"
                                        },
                                        "body": {
                                            "type": "box",
                                            "layout": "vertical",
                                            "contents": [
                                                {
                                                    "type": "box",
                                                    "layout": "vertical",
                                                    "contents": [
                                                        {
                                                            "type": "text",
                                                            "text": "You can view all of your opportunities by type \"#SeeAll\"",
                                                            "wrap": true,
                                                            "align": "center"
                                                        }
                                                    ],
                                                    "spacing": "xl"
                                                }
                                            ],
                                            "spacing": "lg"
                                        },
                                        "styles": {
                                            "header": {
                                                "backgroundColor": "#0069D9"
                                            }
                                        }
                                    }
                                    let flex = {
                                        "type": "flex",
                                        "altText": "Hello " + profile.displayName,
                                        "contents": bubble,
                                        "quickReply": {
                                            "items": [
                                                {
                                                    "type": "action",
                                                    "action": {
                                                        "type": "message",
                                                        "label": "See All Opportunities",
                                                        "text": "#SeeAll"
                                                    }
                                                }
                                            ]
                                        }

                                    }
                                    let text = {
                                        "type": "text",
                                        "text": "#SeeAll",

                                    }

                                    liff.sendMessages([flex, text]).then(function () {
                                        liff.closeWindow()
                                    })
                                } else {
                                    window.location.href = 'https://lin.ee/RMVcU7O'
                                }
                            })
                        }
                    },
                    error: function (err) {
                        $.LoadingOverlay("hide");
                        Swal.fire({
                            icon: 'error',
                            title: 'Register Error',
                            text: 'Please try again.',
                            showConfirmButton: false,
                            timer: 1500
                        })
                    }
                })
            }
        })
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gasparesganga-jquery-loading-overlay@2.1.7/dist/loadingoverlay.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>

</html>
